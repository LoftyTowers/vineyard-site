<div *ngIf="isOpen" class="fixed inset-0 z-50 flex items-center justify-center">
  <div class="absolute inset-0 bg-black/40" (click)="close()"></div>
  <div class="relative bg-white rounded-lg shadow-xl w-[90vw] max-w-4xl p-6">
    <div class="flex items-center justify-between mb-4">
      <h2 class="text-lg font-semibold text-contrast">Select a hero image</h2>
      <button class="text-gray-500 hover:text-gray-700" type="button" (click)="close()">âœ•</button>
    </div>

    <div *ngIf="isLoading" class="text-sm text-gray-500">Loading images...</div>
    <div *ngIf="errorMessage" class="text-sm text-red-600">{{ errorMessage }}</div>

    <div *ngIf="!isLoading && !errorMessage" class="grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-4 max-h-[60vh] overflow-auto">
      <button
        type="button"
        class="group border rounded-md p-2 text-left transition"
        [class.border-primary]="image.id === selectedId"
        [class.ring-2]="image.id === selectedId"
        [class.ring-primary]="image.id === selectedId"
        *ngFor="let image of images"
        (click)="selectImage(image.id)"
      >
        <img [src]="image.thumbnailUrl || image.url" [alt]="image.alt || ''" class="w-full h-28 object-cover rounded" />
        <div class="mt-2 text-xs text-gray-600 truncate">{{ image.caption || image.alt || 'Untitled' }}</div>
      </button>
    </div>

    <div class="mt-5 flex justify-end gap-2">
      <button type="button" class="px-4 py-2 text-sm rounded border border-gray-300" (click)="close()">Cancel</button>
      <button type="button" class="px-4 py-2 text-sm rounded bg-primary text-white disabled:opacity-50" [disabled]="!selectedId" (click)="confirm()">Use image</button>
    </div>
  </div>
</div>
